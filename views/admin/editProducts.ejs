<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css">

    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>

    <link rel="stylesheet" href="/assets/css/admin/addProducts.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css" integrity="sha512-hvNR0F/e2J7zPPfLC9auFe3/SE0yG4aJCOd/qxew74NN7eyiSKjr7xJJMu1Jy2wf7FXITpWS1E/RY8yzuXN7VA==" crossorigin="anonymous" referrerpolicy="no-referrer" />


    <title>Edit Products</title>
</head>


<body>
    <!-- Navbar -->
    <%- include('../../views/admin/adminNavbar.ejs') %>
        <!-- Navbar -->
        <br>


        <div class="container-fluid conF-2 outerDiv" id="blur">
            <div class="row1">

                <div class="con-1 ">
                    <div class="box-1">
                        <a href="" class="AdminLogo"><img src="/assets/images/admin.png" class="adminIcon" alt=""> <span
                                class="adminName">Admin</span></a>
                    </div>
                    <a href="adminDashboard">
                        <button class="btns btnDashboard "><img class="img" src="/assets/images/grid.png" alt=""><span
                                class="btnvalue">Dashboard</span></button>
                    </a>
                    <a href="ProductList">
                        <button class="btns btnProducts btnColor"><img class="img" src="/assets/images/grid.png"
                                alt=""><span class="btnvalue">Products</span></button>
                    </a>
                    <a href="Category">
                        <button class="btns btnCategory "><img class="img" src="/assets/images/grid.png" alt=""><span
                                class="btnvalue"><span>Category</span></button>
                    </a>
                    <a href="orderHistory">
                        <button class="btns btnOrder"><img class="img" src="/assets/images/grid.png" alt=""><span
                                class="btnvalue">Order History</span></button>
                    </a>
                    <a href="coupon">
                        <button class="btns btnCoupon"><img class="img" src="/assets/images/grid.png" alt=""><span
                                class="btnvalue">Coupon</span></button>
                    </a>
                    <a href="salesReport">
                        <button class="btns btnSRate"><img class="img" src="/assets/images/grid.png" alt=""><span
                                class="btnvalue">Sales Report</span></button>
                    </a>

                    <a href="CustomerDetails">
                        <button class="btns btnUser"><img class="img" src="/assets/images/grid.png" alt=""><span
                                class="btnvalue">User Report</span> </button>
                    </a>
                    <a href="offers">
                        <button class="btns btnBanner"><img class="img" src="/assets/images/grid.png" alt=""><span
                                class="btnvalue">Offers</span></button>
                    </a>

                    <button class="btns btnWallet"><img class="img" src="/assets/images/grid.png" alt=""><span
                            class="btnvalue">Wallet</span></button>
                </div>
                <div class="con-2">
                    <div class="row row2">
                        <div class="col-4 col1">
                            <h3>Edit Products</h3>
                        </div>

                        <div class="col-8 col2">
                            <a href="/adminLogin/ProductList">
                                <button class="btnCancel"><span><i class="fa-solid fa-xmark"
                                            style="color: #ffffff;"></i></span>Cancel</button>
                            </a>
                        </div>
                    </div>

                    <div class="Container con2">
                        <div class="row MessageRow">
                            <p>
                                <%= success %>
                            </p>
                        </div>
                        <div class="row row3">
                            <form action="editProducts?id=<%= productInfo._id %>&_method=PUT" class="frmRow3"
                                method="post" >
                                <div class="row generalRow">
                                    <div class="col-11 col11">
                                        <br>
                                        <h5>General Information</h5>
                                        <div class="row box1">
                                            <div class="col-12 box1-col1">
                                                <div class="col-6">
                                                    <label class="lbl" for="">Product Name</label>
                                                    <input type="text" class="form-control inputpass" name="ProductName"
                                                        id="ProductName" placeholder="Enter Product Name"
                                                        value="<%= productInfo.ProductName %>">
                                                </div>
                                                <div class="col-6">
                                                    <label class="lbl" for="">Brand Name</label>
                                                    <input type="text" class="form-control inputpass" name="BrandName"
                                                        id="ProductName" placeholder="Enter Brand Name"
                                                        value="<%= productInfo.BrandName %>">
                                                </div>
                                            </div>
                                            <div class="col-12 box1-col1">
                                                <div class="col-4 categoryRow">
                                                    <label class="lbl" for="">Category Name</label>

                                                    <select name="CategoryName" class="dropbtn">
                                                        <option value="Mens" <%=productInfo.CategoryName==='Mens'
                                                            ? 'selected' : '' %> >Mens</option>
                                                        <option value="Womens" <%=productInfo.CategoryName==='Womens'
                                                            ? 'selected' : '' %> >Womens</option>
                                                        <option value="Kids" <%=productInfo.CategoryName==='Kids'
                                                            ? 'selected' : '' %> >Kids</option>
                                                        <option value="Accessories"
                                                            <%=productInfo.CategoryName==='Accessories' ? 'selected'
                                                            : '' %> >Accessories</option>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <label class="lbl" for="">Stock Quantity</label>
                                                    <input type="text" class="form-control inputpass"
                                                        name="StockQuantity" id="CategoryName"
                                                        placeholder="Enter Stock Quantity"
                                                        value="<%= productInfo.StockQuantity %>">
                                                </div>

                                                <div class="col-4 categoryRow">
                                                    <label class="lbl" for="">Sub-Category Name</label>

                                                    <select name="subCategory" class="dropbtn">
                                                        <% subCategory.forEach((data)=> { %>
                                                            <option value="<%= data %>">
                                                                <%= data %>
                                                            </option>
                                                            <% }) %>
                                                    </select>
                                                </div>

                                            </div>

                                            <div class="col-12 box1-col1">
                                                <div class="col-4">
                                                    <label class="lbl" for="">Purchase Rate</label>
                                                    <input type="text" class="form-control inputpass"
                                                        name="PurchaseRate" id="PurchaseRate"
                                                        placeholder="Enter Purchase Rate"
                                                        value="<%= productInfo.PurchaseRate %>">
                                                </div>
                                                <div class="col-4">
                                                    <label class="lbl" for="">Sales Rate</label>
                                                    <input type="text" class="form-control inputpass" name="SalesRate"
                                                        id="SalesRate" placeholder="Enter Sales Rate"
                                                        value="<%= productInfo.SalesRate %>">
                                                </div>
                                                <div class="col-4">
                                                    <label class="lbl" for="">Color Name</label>

                                                    <select name="ColorNames" class="dropbtn">
                                                        <option value="Red" <%=productInfo.ColorNames==='Red'
                                                            ? 'selected' : '' %> >Red</option>
                                                        <option value="Blue" <%=productInfo.ColorNames==='Blue'
                                                            ? 'selected' : '' %> >Blue</option>
                                                        <option value="Black" <%=productInfo.ColorNames==='Black'
                                                            ? 'selected' : '' %> >Black</option>
                                                        <option value="White" <%=productInfo.ColorNames==='White'
                                                            ? 'selected' : '' %> >White</option>
                                                        <option value="yellow" <%=productInfo.ColorNames==='yellow'
                                                            ? 'selected' : '' %> >yellow</option>
                                                        <option value="green" <%=productInfo.ColorNames==='green'
                                                            ? 'selected' : '' %> >green</option>
                                                        <option value="grey" <%=productInfo.ColorNames==='grey'
                                                            ? 'selected' : '' %> >grey</option>
                                                    </select>
                                                </div>

                                            </div>

                                            <div class="col-12 box1-col1 Description">
                                                <div class="col-12 textAreaRow">
                                                    <label class="lbl" for="">Product Description</label>

                                                    <textarea class="inputDescription" name="ProductDescription" id=""
                                                        placeholder="Enter your Product Description" cols="30" rows="10"
                                                        name="ProductDescription"><%= productInfo.ProductDescription %></textarea>
                                                </div>

                                            </div>

                                            <div class="col-12 box1-col1">
                                                <div class="col-12 sizeRow">
                                                    <label class="lbl" for="">Select Product Size</label>
                                                    <div class="col-12 checkRow">
                                                        <% productInfo.ProductSize.forEach((sizeObject)=> { %>

                                                            <label class="container">
                                                                <%= sizeObject.size==='S' ? 'Small' :
                                                                    sizeObject.size==='M' ? 'Medium' :
                                                                    sizeObject.size==='L' ? 'Large' :
                                                                    sizeObject.size==='XL' ? 'Extra Large' :
                                                                    sizeObject.size==='XXL' ? 'Double Extra Large'
                                                                    : 'Unknown Size' %>

                                                                    <input type="checkbox" class="checkBox" name="sizes"
                                                                        value="<%= sizeObject.size %>" checked="checked"
                                                                        <%=sizeObject.size==='S' ? 'checked' : '' %> >
                                                                    <span class="checkmark"></span>
                                                                    <input type="text" class="form-control inputSmall"
                                                                        name="SizeQuantity" id="TotalPrice"
                                                                        placeholder="S Quantity"
                                                                        value="<%= sizeObject.quantity %>">
                                                            </label>
                                                            <% }) %>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="col-12 box1-col1">
                                                <div class="col-4">
                                                    <label class="lbl" for="">VAT Amount (%)</label>
                                                    <input type="text" class="form-control inputpass" name="VATAmount"
                                                        id="SalesRate" placeholder="Enter VAT Amount"
                                                        value="<%= productInfo.VATAmount %>">
                                                </div>
                                                <div class="col-4">
                                                    <label class="lbl" for="">MRP</label>
                                                    <input type="text" class="form-control inputpass"
                                                        name="DiscountPrecentage" id="TotalPrice"
                                                        placeholder="Enter Discount Precentage"
                                                        value="<%= productInfo.MRP %>">
                                                </div>
                                                <div class="col-4 categoryRow">
                                                    <label class="lbl" for="">Add Images</label>
                                                    <input type="file" id="selectImage" style="padding: 0;"
                                                        onchange="cropImage()" class="form-control inputpass"
                                                        accept="image/*" multiple>
                                                </div>

                                            </div>




                                        </div>
                                    </div>
                                </div>

                                <div class="row ImgRow">
                                    <div class="col-11 col11-2">
                                        <br>
                                        <h5>Product Images</h5>
                                        <br>
                                        <div class="row">
                                            <div class="col-12 imgInput">


                                                <% productInfo.files.forEach((val,i)=> { %>
                                                    <label for="input-file<%=i+1%>" id="drop-area<%=i+1%>"
                                                        style="display: flex;align-items: start;justify-content: end; margin-left: 20px;">
                                                        <a class="dltImage" href="" onclick="deleteImage('<%=i%>','<%= productInfo._id %>')">
                                                            <i class="fa-solid fa-xmark" style="color: #000000;"></i></a>
                                                        <div id="img-view<%=i+1%>" class="border"
                                                            style="background-image: url('<%= productInfo.files[i].url %>');">
                                                        </div>
                                                    </label>
                                                <% }) %>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="row SaveBtnRow">
                                    <button type="submit" class="btnSaveProduct">Update Products</button>
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="popup">
            <div class="row" style="display: flex;">
                <p>Crop Your Image Here </p>
                <span class="btnSpan"><button class="btn " id="SaveBtn">Save</button></span>
            </div>

            <div class="row imageRow">
                <div class="Showimage imgDiv" style="width: 50%;">
                    <img src="/assets/images/cropImage.jpg" alt="" id="image">
                </div>
                <div class="Showimage" id="" style="width: 40%;">
                    <div id="imageContainer" style="width: 100%;">

                    </div>
                    <div class="btnRow">
                        <a href="editProducts?id=<%= productInfo._id %>">
                            <button class="Cancel"><span><i class="fa-solid fa-xmark"
                                        style="color: #ffffff;"></i></span>Cancel</button>
                        </a>
                        <button type="button" id="cropBtn" class="crop"><span><i class="fa-solid fa-crop"
                                    style="color: #ffffff;"></i></span>Crop</button>
                    </div>
                </div>

            </div>

        </div>



        <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js" integrity="sha512-9KkIqdfN7ipEW6B6k+Aq20PV31bjODg4AA52W+tYtAE0jE0kMx49bjJ3FgvS56wzmyfMUHbQ4Km2b7l9+Y/+Eg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

        <!-- <script src="/assets/js/addProduct.js"></script> -->
        <script src="/assets/js/editProducts.js"></script>


</body>

</html>