<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css">

    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>

    <link rel="stylesheet" href="/assets/css/admin/addProducts.css">

    <link rel="stylesheet" href="/assets/css/admin/category.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />


    <title>Customers</title>
</head>


<body>
    <!-- Navbar -->
    <%- include('../../views/admin/adminNavbar.ejs') %>
        <!-- Navbar -->
        <br>


        <div class="container-fluid conF-2">
            <div class="row1">

                <div class="con-1 ">
                    <div class="box-1">
                        <a href="" class="AdminLogo"><img src="/assets/images/admin.png"
                                        class="adminIcon" alt=""> <span
                                        class="adminName">Admin</span></a>
                </div>
                <a href="adminDashboard">
                        <button class="btns btnDashboard "><img class="img"
                                        src="/assets/images/grid.png" alt=""><span
                                        class="btnvalue">Dashboard</span></button>
                </a>
                <a href="ProductList">
                        <button class="btns btnProducts "><img class="img"
                                        src="/assets/images/grid.png" alt=""><span
                                        class="btnvalue">Products</span></button>
                </a>
                <a href="Category">
                <button class="btns btnCategory "><img class="img" src="/assets/images/grid.png"
                                alt=""><span class="btnvalue"><span>Category</span></button>
                </a>
                <a href="orderHistory">
                <button class="btns btnOrder"><img class="img" src="/assets/images/grid.png"
                                alt=""><span class="btnvalue">Order History</span></button>
                </a>
              <a href="coupon">
                  <button class="btns btnCoupon"><img class="img" src="/assets/images/grid.png"
                                alt=""><span class="btnvalue">Coupon</span></button>
              </a>
              <a href="salesReport">
                <button class="btns btnSRate"><img class="img" src="/assets/images/grid.png"
                                alt=""><span class="btnvalue">Sales Report</span></button>
              </a>
                
                <a href="CustomerDetails">
                        <button class="btns btnUser btnColor"><img class="img"
                                        src="/assets/images/grid.png" alt=""><span
                                        class="btnvalue">User Report</span> </button>
                </a>
                <a href="offers">
                        <button class="btns btnBanner"><img class="img" src="/assets/images/grid.png"
                                alt=""><span class="btnvalue">Offers</span></button>
                </a>
              
                <button class="btns btnWallet"><img class="img" src="/assets/images/grid.png"
                                alt=""><span class="btnvalue">Wallet</span></button>
                </div>

                <!-- Right side div start here... -->

                <div class="con-2">
                    <div class="row row2">
                        <div class="col-3 col1">
                            <h3>Customer Details</h3>
                        </div>
                        <div class="col-6 col2">
                            <div class="col-12 col3">
                                
                                    <input type="text" class="searchInput" name="search" required="true"
                                        id="exampleFormControlInput1" placeholder="Search ">
                                    <span><a href=""><i class="fa-solid fa-magnifying-glass searchBtn"
                                                style="color: #8b8e99;"></i></a></span>
                                </form>
                            </div>
                        </div>
                        <div class="col-3 col2">
                            <a href="/"><button class="btnExport"><span><i class="fa-solid fa-download"
                                            style="color: #ffffff;"></i></span>Export Info</button></a>
                        </div>
                    </div>

                    <div class="row row3">
                        <div class="col-7 col7">
                            <div class=" sort-UsageRow">
                                <a href="CustomerFilter?filter=all" id="all">All</a>
                                <span><a href="CustomerFilter?filter=active"  id="active">Active</a></span>
                                <span><a href="CustomerFilter?filter=blocked"  id="blocked">Blocked</a></span>

                            </div>
                        </div>
                        <div class="col-5 sort-AddedRow">
                            <div class="dateBox">
                                <input type="date" class="dateInput" id="startDate">
                            </div>
                            <div class="dateBox2">
                                <input type="date" class="dateInput" id="endDate">
                            </div>
                        </div>
                    </div>



                    <div class="row row4">
                        <table class="table table1">
                            <thead class="thead tableHead">
                                <tr>
                                    <th scope="col">SI</th>
                                    <th scope="col">UserName</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Phone No</th>
                                    <th scope="col">Address</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Added</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% users.forEach((data,index)=> { %>
                                    <tr class="tableRow">
                                        <th scope="row"><%= index + 1 %></th>
                                        <td><%= data.userName %></td>
                                        <td><%= data.emailAddress %></td>
                                        <td><%= data.phoneNo %></td>
                                        <td>No Data Yet</td>
                                        <td id="statusTd"><%= data.status ? 'Active' : 'Blocked' %></td>
                                        <td><%= data.added.toLocaleDateString() %></td>
                                        <td class="icon-cell">
                                            <form class="actionForm"  method="post" action="CustomerDetails?id=<%= data._id %>&_method=PATCH">
                                                <% if(data.status === true) { %>
                                                    <button class="iconbtns" type="submit">
                                                        <a id="activeIcon" onclick="AlertBox('activeIcon')"><i class="fa-solid fa-eye" style="color: #5e5e5e;"></i></a>
                                                    </button>
                                                <% } else if(data.status === false) { %>
                                                    <button class="iconbtns" type="submit">
                                                        <a id="blockedIcon" onclick="AlertBox('blockedIcon')"><i class="fa-solid fa-eye-slash" style="color: #5e5e5e;"></i></a>
                                                    </button>
                                                <% } %>
                                                <span class="delete"><a href="" id="dltBtn" onclick="AlertBox('dltBtn')"><i class="fa-solid fa-trash " style="color: #5e5e5e;"></i></a></span>
                                            </form>
                                        </td>
                                    </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                    

                </div>

                <script>
                    function AlertBox(value){
                        const myForm = document.getElementById(value);
        
                        if(value == 'activeIcon'){
                            const confirmation = confirm('Are you sure to Block the user?');
                            if (!confirmation) {
                                event.preventDefault(); // Prevent form submission
                            }
                        }else if(value == 'blockedIcon'){
                            const confirmation = confirm('Are you sure to Unblock the user?');
                            if (!confirmation) {
                                event.preventDefault(); // Prevent form submission
                            }
                           
                        }else if(value == 'dltBtn'){
                            const confirmation = confirm('Are you sure to Delete the product?');
                            if (!confirmation) {
                                event.preventDefault(); // Prevent form submission
                            }
                        }
        
                    }
                </script>



</body>

</html>